{"version":3,"sources":["utils/index.ts","utils/http.ts","utils/use-async.ts","components/profiler.tsx","components/error-boundary.tsx","App.tsx","reportWebVitals.ts","context/index.tsx","index.tsx","auth-provider.ts","components/lib.tsx","context/auth-context.tsx"],"names":["cleanObject","object","result","_objectSpread","Object","keys","forEach","key","value","undefined","isVoid","useMount","callback","useEffect","useDebounce","delay","_useState","useState","_useState2","_slicedToArray","debouncedValue","setDebouncedValue","timeout","setTimeout","clearTimeout","useDocumentTitle","title","keepOnUnmount","arguments","length","oldTitle","useRef","document","current","resetRoute","window","location","href","origin","subset","obj","filteredEntries","entries","filter","_ref","includes","fromEntries","useMountedRef","mountedRef","apiUrl","process","http","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","endpoint","_ref2","data","token","customConfig","config","_args2","wrap","_context2","prev","next","headers","_objectWithoutProperties","_excluded","method","Authorization","concat","toUpperCase","qs","stringify","body","JSON","abrupt","fetch","then","_ref3","_callee","response","_context","status","auth","reload","Promise","reject","message","json","sent","ok","stop","_x2","apply","_x","useHttp","user","useAuth","useCallback","_len","_ref4","Array","_key","defaultInitialState","stat","error","defaultConfig","throwOnError","useAsync","initialState","initialConfig","_useReducer","useReducer","state","action","_useReducer2","safeDispatch","dispatch","useSafeDispatch","retry","setRetry","setData","setError","run","promise","runConfig","Error","catch","isIdle","isLoading","isError","isSuccess","queue","setInterval","queueToSend","_toConsumableArray","console","log","Profiler","metadata","phases","props","React","createElement","assign","onRender","id","phase","actualDuration","baseDuration","startTime","commitTime","interactions","push","ErrorBoundary","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","args","call","_createClass","this","_this$props","fallbackRender","children","Component","AuthenticatedApp","lazy","UnauthenticatedApp","App","className","FullPageErrorFallback","Suspense","fallback","FullPageLoading","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","AppProviders","queryClient","QueryClient","defaultOptions","queries","refetchOnWindowFocus","QueryClientProvider","client","Router","AuthProvider","loadServer","ReactDOM","render","StrictMode","DevTools","getElementById","localStorageKey","getToken","localStorage","getItem","handleUserResponse","setItem","login","t0","t1","t2","t3","register","logout","_callee3","_context3","removeItem","Row","styled","div","_templateObject","_taggedTemplateLiteral","between","marginBottom","gap","FullPage","_templateObject2","Spin","size","ErrorBox","Typography","Text","type","ButtonNoPadding","Button","_templateObject3","ScreenContainer","_templateObject4","bootstrapUser","AuthContext","createContext","displayName","_useAsync","setUser","useQueryClient","Provider","form","clear","context","useContext"],"mappings":"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","file":"static/js/main.4b1fe052.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\r\n\r\nexport const isFalsy = (value: unknown) => (value === 0 ? false : !value);\r\n\r\nexport const isVoid = (value: unknown) =>\r\n  value === undefined || value === null || value === \"\";\r\n\r\n// let a: object\r\n// a = {name: 'jack'}\r\n// a = () => {\r\n// }\r\n// a = new RegExp('')\r\n//\r\n// let b: { [key: string]: unknown }\r\n// b = {name: 'Jack'}\r\n// b = () => {}\r\n// 在一个函数里，改变传入的对象本身是不好的\r\nexport const cleanObject = (object?: { [key: string]: unknown }) => {\r\n  // Object.assign({}, object)\r\n  if (!object) {\r\n    return {};\r\n  }\r\n  const result = { ...object };\r\n  Object.keys(result).forEach((key) => {\r\n    const value = result[key];\r\n    if (isVoid(value)) {\r\n      delete result[key];\r\n    }\r\n  });\r\n  return result;\r\n};\r\n\r\nexport const useMount = (callback: () => void) => {\r\n  useEffect(() => {\r\n    callback();\r\n  }, [callback]);\r\n};\r\n\r\n// const debounce = (func, delay) => {\r\n//   let timeout;\r\n//   return (...param) => {\r\n//     if (timeout) {\r\n//       clearTimeout(timeout);\r\n//     }\r\n//     timeout = setTimeout(function() {\r\n//       func(...param);\r\n//     }, delay);\r\n//   }\r\n// }\r\n// const log = debounce(() => console.log('call'), 5000)\r\n// log()\r\n// log()\r\n// log()\r\n//   ...5s\r\n// 执行！\r\n\r\n// debounce 原理讲解：\r\n// 0s ---------> 1s ---------> 2s --------> ...\r\n//     一定要理解：这三个函数都是同步操作，所以它们都是在 0~1s 这个时间段内瞬间完成的；\r\n//     log()#1 // timeout#1\r\n//     log()#2 // 发现 timeout#1！取消之，然后设置timeout#2\r\n//     log()#3 // 发现 timeout#2! 取消之，然后设置timeout#3\r\n//             // 所以，log()#3 结束后，就只剩timeout#3在独自等待了\r\n\r\n// 后面用泛型来规范类型\r\nexport const useDebounce = <V>(value: V, delay?: number) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    // 每次在value变化以后，设置一个定时器\r\n    const timeout = setTimeout(() => setDebouncedValue(value), delay);\r\n    // 每次在上一个useEffect处理完以后再运行\r\n    return () => clearTimeout(timeout);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n\r\nexport const useArray = <T>(initialArray: T[]) => {\r\n  const [value, setValue] = useState(initialArray);\r\n  return {\r\n    value,\r\n    setValue,\r\n    add: (item: T) => setValue([...value, item]),\r\n    clear: () => setValue([]),\r\n    removeIndex: (index: number) => {\r\n      const copy = [...value];\r\n      copy.splice(index, 1);\r\n      setValue(copy);\r\n    },\r\n  };\r\n};\r\n\r\nexport const useDocumentTitle = (title: string, keepOnUnmount = true) => {\r\n  const oldTitle = useRef(document.title).current;\r\n  // 页面加载时: 旧title\r\n  // 加载后：新title\r\n\r\n  useEffect(() => {\r\n    document.title = title;\r\n  }, [title]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (!keepOnUnmount) {\r\n        // 如果不指定依赖，读到的就是旧title\r\n        document.title = oldTitle;\r\n      }\r\n    };\r\n  }, [keepOnUnmount, oldTitle]);\r\n};\r\n\r\nexport const resetRoute = () => (window.location.href = window.location.origin);\r\n\r\n/**\r\n * 传入一个对象，和键集合，返回对应的对象中的键值对\r\n * @param obj\r\n * @param keys\r\n */\r\nexport const subset = <\r\n  O extends { [key in string]: unknown },\r\n  K extends keyof O\r\n>(\r\n  obj: O,\r\n  keys: K[]\r\n) => {\r\n  const filteredEntries = Object.entries(obj).filter(([key]) =>\r\n    keys.includes(key as K)\r\n  );\r\n  return Object.fromEntries(filteredEntries) as Pick<O, K>;\r\n};\r\n\r\n/**\r\n * 返回组件的挂载状态，如果还没挂载或者已经卸载，返回false；反之，返回true\r\n */\r\nexport const useMountedRef = () => {\r\n  const mountedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  });\r\n\r\n  return mountedRef;\r\n};\r\n","import qs from \"qs\";\r\nimport * as auth from \"auth-provider\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { useCallback } from \"react\";\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\ninterface Config extends RequestInit {\r\n  token?: string;\r\n  data?: object;\r\n}\r\n\r\nexport const http = async (\r\n  endpoint: string,\r\n  { data, token, headers, ...customConfig }: Config = {}\r\n) => {\r\n  const config = {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : \"\",\r\n      \"Content-Type\": data ? \"application/json\" : \"\",\r\n    },\r\n    ...customConfig,\r\n  };\r\n\r\n  if (config.method.toUpperCase() === \"GET\") {\r\n    endpoint += `?${qs.stringify(data)}`;\r\n  } else {\r\n    config.body = JSON.stringify(data || {});\r\n  }\r\n\r\n  // axios 和 fetch 的表现不一样，axios可以直接在返回状态不为2xx的时候抛出异常\r\n  return window\r\n    .fetch(`${apiUrl}/${endpoint}`, config)\r\n    .then(async (response) => {\r\n      if (response.status === 401) {\r\n        await auth.logout();\r\n        window.location.reload();\r\n        return Promise.reject({ message: \"请重新登录\" });\r\n      }\r\n      const data = await response.json();\r\n      if (response.ok) {\r\n        return data;\r\n      } else {\r\n        return Promise.reject(data);\r\n      }\r\n    });\r\n};\r\n\r\n// JS 中的typeof，是在runtime时运行的\r\n// return typeof 1 === 'number'\r\n\r\n// TS 中的typeof，是在静态环境运行的\r\n// return (...[endpoint, config]: Parameters<typeof http>) =>\r\nexport const useHttp = () => {\r\n  const { user } = useAuth();\r\n  // utility type 的用法：用泛型给它传入一个其他类型，然后utility type对这个类型进行某种操作\r\n  return useCallback(\r\n    (...[endpoint, config]: Parameters<typeof http>) =>\r\n      http(endpoint, { ...config, token: user?.token }),\r\n    [user?.token]\r\n  );\r\n};\r\n\r\n// 类型别名、Utility Type 讲解\r\n// 联合类型\r\nlet myFavoriteNumber: string | number;\r\nmyFavoriteNumber = \"seven\";\r\nmyFavoriteNumber = 7;\r\n// TS2322: Type '{}' is not assignable to type 'string | number'.\r\n// myFavoriteNumber = {}\r\nlet jackFavoriteNumber: string | number;\r\n\r\n// 类型别名在很多情况下可以和interface互换\r\n// interface Person {\r\n//   name: string\r\n// }\r\n// type Person = { name: string }\r\n// const xiaoMing: Person = {name: 'xiaoming'}\r\n\r\n// 类型别名, interface 在这种情况下没法替代type\r\ntype FavoriteNumber = string | number;\r\nlet roseFavoriteNumber: FavoriteNumber = \"6\";\r\n\r\n// interface 也没法实现Utility type\r\ntype Person = {\r\n  name: string;\r\n  age: number;\r\n};\r\nconst xiaoMing: Partial<Person> = {};\r\nconst shenMiRen: Omit<Person, \"name\" | \"age\"> = {};\r\ntype PersonKeys = keyof Person;\r\ntype PersonOnlyName = Pick<Person, \"name\" | \"age\">;\r\ntype Age = Exclude<PersonKeys, \"name\">;\r\n\r\n// Partial 的实现\r\ntype Partial<T> = {\r\n  [P in keyof T]?: T[P];\r\n};\r\n","import { useCallback, useReducer, useState } from \"react\";\r\nimport { useMountedRef } from \"utils/index\";\r\n\r\ninterface State<D> {\r\n  error: Error | null;\r\n  data: D | null;\r\n  stat: \"idle\" | \"loading\" | \"error\" | \"success\";\r\n}\r\n\r\nconst defaultInitialState: State<null> = {\r\n  stat: \"idle\",\r\n  data: null,\r\n  error: null,\r\n};\r\n\r\nconst defaultConfig = {\r\n  throwOnError: false,\r\n};\r\n\r\nconst useSafeDispatch = <T>(dispatch: (...args: T[]) => void) => {\r\n  const mountedRef = useMountedRef();\r\n  return useCallback(\r\n    (...args: T[]) => (mountedRef.current ? dispatch(...args) : void 0),\r\n    [dispatch, mountedRef]\r\n  );\r\n};\r\n\r\nexport const useAsync = <D>(\r\n  initialState?: State<D>,\r\n  initialConfig?: typeof defaultConfig\r\n) => {\r\n  const config = { ...defaultConfig, ...initialConfig };\r\n  const [state, dispatch] = useReducer(\r\n    (state: State<D>, action: Partial<State<D>>) => ({ ...state, ...action }),\r\n    {\r\n      ...defaultInitialState,\r\n      ...initialState,\r\n    }\r\n  );\r\n  const safeDispatch = useSafeDispatch(dispatch);\r\n  // useState直接传入函数的含义是：惰性初始化；所以，要用useState保存函数，不能直接传入函数\r\n  // https://codesandbox.io/s/blissful-water-230u4?file=/src/App.js\r\n  const [retry, setRetry] = useState(() => () => {});\r\n\r\n  const setData = useCallback(\r\n    (data: D) =>\r\n      safeDispatch({\r\n        data,\r\n        stat: \"success\",\r\n        error: null,\r\n      }),\r\n    [safeDispatch]\r\n  );\r\n\r\n  const setError = useCallback(\r\n    (error: Error) =>\r\n      safeDispatch({\r\n        error,\r\n        stat: \"error\",\r\n        data: null,\r\n      }),\r\n    [safeDispatch]\r\n  );\r\n\r\n  // run 用来触发异步请求\r\n  const run = useCallback(\r\n    (promise: Promise<D>, runConfig?: { retry: () => Promise<D> }) => {\r\n      if (!promise || !promise.then) {\r\n        throw new Error(\"请传入 Promise 类型数据\");\r\n      }\r\n      setRetry(() => () => {\r\n        if (runConfig?.retry) {\r\n          run(runConfig?.retry(), runConfig);\r\n        }\r\n      });\r\n      safeDispatch({ stat: \"loading\" });\r\n      return promise\r\n        .then((data) => {\r\n          setData(data);\r\n          return data;\r\n        })\r\n        .catch((error) => {\r\n          // catch会消化异常，如果不主动抛出，外面是接收不到异常的\r\n          setError(error);\r\n          if (config.throwOnError) return Promise.reject(error);\r\n          return error;\r\n        });\r\n    },\r\n    [config.throwOnError, setData, setError, safeDispatch]\r\n  );\r\n\r\n  return {\r\n    isIdle: state.stat === \"idle\",\r\n    isLoading: state.stat === \"loading\",\r\n    isError: state.stat === \"error\",\r\n    isSuccess: state.stat === \"success\",\r\n    run,\r\n    setData,\r\n    setError,\r\n    // retry 被调用时重新跑一遍run，让state刷新一遍\r\n    retry,\r\n    ...state,\r\n  };\r\n};\r\n","import React, { ProfilerOnRenderCallback, ProfilerProps } from \"react\";\r\n\r\ntype Props = { metadata?: any; phases?: (\"mount\" | \"update\")[] } & Omit<\r\n  ProfilerProps,\r\n  \"onRender\"\r\n>;\r\n\r\nlet queue: unknown[] = [];\r\n\r\nconst sendProfileQueue = () => {\r\n  if (!queue.length) {\r\n    return;\r\n  }\r\n  const queueToSend = [...queue];\r\n  queue = [];\r\n  console.log(queueToSend);\r\n};\r\n\r\nsetInterval(sendProfileQueue, 5000);\r\n\r\nexport const Profiler = ({ metadata, phases, ...props }: Props) => {\r\n  const reportProfile: ProfilerOnRenderCallback = (\r\n    id,\r\n    phase,\r\n    actualDuration,\r\n    baseDuration,\r\n    startTime,\r\n    commitTime,\r\n    interactions\r\n  ) => {\r\n    if (!phases || phases.includes(phase)) {\r\n      queue.push({\r\n        id,\r\n        phase,\r\n        actualDuration,\r\n        baseDuration,\r\n        startTime,\r\n        commitTime,\r\n        interactions,\r\n        metadata,\r\n      });\r\n    }\r\n  };\r\n\r\n  return <React.Profiler onRender={reportProfile} {...props} />;\r\n};\r\n","import React from \"react\";\r\n\r\ntype FallbackRender = (props: { error: Error | null }) => React.ReactElement;\r\n\r\n// https://github.com/bvaughn/react-error-boundary\r\nexport class ErrorBoundary extends React.Component<\r\n  React.PropsWithChildren<{ fallbackRender: FallbackRender }>,\r\n  { error: Error | null }\r\n> {\r\n  state = { error: null };\r\n\r\n  // 当子组件抛出异常，这里会接收到并且调用\r\n  static getDerivedStateFromError(error: Error) {\r\n    return { error };\r\n  }\r\n\r\n  render() {\r\n    const { error } = this.state;\r\n    const { fallbackRender, children } = this.props;\r\n    if (error) {\r\n      return fallbackRender({ error });\r\n    }\r\n    return children;\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { useAuth } from \"context/auth-context\";\r\nimport { ErrorBoundary } from \"components/error-boundary\";\r\nimport { FullPageErrorFallback, FullPageLoading } from \"components/lib\";\r\n\r\nconst AuthenticatedApp = React.lazy(() => import(\"authenticated-app\"));\r\nconst UnauthenticatedApp = React.lazy(() => import(\"unauthenticated-app\"));\r\n\r\nfunction App() {\r\n  const { user } = useAuth();\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <ErrorBoundary fallbackRender={FullPageErrorFallback}>\r\n        <React.Suspense fallback={<FullPageLoading />}>\r\n          {user ? <AuthenticatedApp /> : <UnauthenticatedApp />}\r\n        </React.Suspense>\r\n      </ErrorBoundary>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);  \r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n}\r\n\r\nexport default reportWebVitals;\r\n","import React, { ReactNode } from \"react\";\r\nimport { AuthProvider } from \"context/auth-context\";\r\nimport { QueryClient, QueryClientProvider } from \"react-query\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\n\r\nexport const AppProviders = ({ children }: { children: ReactNode }) => {\r\n  const queryClient = new QueryClient({\r\n    defaultOptions: {\r\n      queries: {\r\n        refetchOnWindowFocus: false,\r\n      },\r\n    },\r\n  });\r\n\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      <Router>\r\n        <AuthProvider>{children}</AuthProvider>\r\n      </Router>\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n","import \"./wdyr\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport { DevTools, loadServer } from \"jira-dev-tool\";\r\n// 务必在jira-dev-tool后面引入\r\nimport \"antd/dist/antd.less\";\r\nimport { AppProviders } from \"context\";\r\nimport { Profiler } from \"components/profiler\";\r\n\r\nloadServer(() =>\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n      <Profiler id={\"Root App\"} phases={[\"mount\"]}>\r\n        <AppProviders>\r\n          <DevTools />\r\n          <App />\r\n        </AppProviders>\r\n      </Profiler>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n  )\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// 在真实环境中，如果使用firebase这种第三方auth服务的话，本文件不需要开发者开发\r\n\r\nimport { User } from \"types/user\";\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\n\r\nconst localStorageKey = \"__auth_provider_token__\";\r\n\r\nexport const getToken = () => window.localStorage.getItem(localStorageKey);\r\n\r\nexport const handleUserResponse = ({ user }: { user: User }) => {\r\n  window.localStorage.setItem(localStorageKey, user.token || \"\");\r\n  return user;\r\n};\r\n\r\nexport const login = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/login`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (response) => {\r\n    if (response.ok) {\r\n      return handleUserResponse(await response.json());\r\n    } else {\r\n      return Promise.reject(await response.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const register = (data: { username: string; password: string }) => {\r\n  return fetch(`${apiUrl}/register`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(data),\r\n  }).then(async (response) => {\r\n    if (response.ok) {\r\n      return handleUserResponse(await response.json());\r\n    } else {\r\n      return Promise.reject(await response.json());\r\n    }\r\n  });\r\n};\r\n\r\nexport const logout = async () =>\r\n  window.localStorage.removeItem(localStorageKey);\r\n","import styled from \"@emotion/styled\";\r\nimport React from \"react\";\r\nimport { Button, Spin, Typography } from \"antd\";\r\nimport { DevTools } from \"jira-dev-tool\";\r\n\r\nexport const Row = styled.div<{\r\n  gap?: number | boolean;\r\n  between?: boolean;\r\n  marginBottom?: number;\r\n}>`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: ${(props) => (props.between ? \"space-between\" : undefined)};\r\n  margin-bottom: ${(props) => props.marginBottom + \"rem\"};\r\n\r\n  > * {\r\n    margin-top: 0 !important;\r\n    margin-bottom: 0 !important;\r\n    margin-right: ${(props) =>\r\n      typeof props.gap === \"number\"\r\n        ? props.gap + \"rem\"\r\n        : props.gap\r\n        ? \"2rem\"\r\n        : undefined};\r\n  }\r\n`;\r\n\r\nconst FullPage = styled.div`\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const FullPageLoading = () => (\r\n  <FullPage>\r\n    <Spin size={\"large\"} />\r\n  </FullPage>\r\n);\r\n\r\nexport const FullPageErrorFallback = ({ error }: { error: Error | null }) => (\r\n  <FullPage>\r\n    <DevTools />\r\n    <ErrorBox error={error} />\r\n  </FullPage>\r\n);\r\n\r\n// 类型守卫\r\nconst isError = (value: any): value is Error => value?.message;\r\n\r\nexport const ErrorBox = ({ error }: { error: unknown }) => {\r\n  if (isError(error)) {\r\n    return <Typography.Text type={\"danger\"}>{error?.message}</Typography.Text>;\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const ButtonNoPadding = styled(Button)`\r\n  padding: 0;\r\n`;\r\n\r\nexport const ScreenContainer = styled.div`\r\n  padding: 3.2rem;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n","import React, { ReactNode, useCallback } from \"react\";\r\nimport * as auth from \"auth-provider\";\r\nimport { http } from \"utils/http\";\r\nimport { useMount } from \"utils\";\r\nimport { useAsync } from \"utils/use-async\";\r\nimport { FullPageErrorFallback, FullPageLoading } from \"components/lib\";\r\nimport { User } from \"types/user\";\r\nimport { useQueryClient } from \"react-query\";\r\n\r\ninterface AuthForm {\r\n  username: string;\r\n  password: string;\r\n}\r\n\r\nconst bootstrapUser = async () => {\r\n  let user = null;\r\n  const token = auth.getToken();\r\n  if (token) {\r\n    const data = await http(\"me\", { token });\r\n    user = data.user;\r\n  }\r\n  return user;\r\n};\r\n\r\nconst AuthContext = React.createContext<\r\n  | {\r\n      user: User | null;\r\n      register: (form: AuthForm) => Promise<void>;\r\n      login: (form: AuthForm) => Promise<void>;\r\n      logout: () => Promise<void>;\r\n    }\r\n  | undefined\r\n>(undefined);\r\nAuthContext.displayName = \"AuthContext\";\r\n\r\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const {\r\n    data: user,\r\n    error,\r\n    isLoading,\r\n    isIdle,\r\n    isError,\r\n    run,\r\n    setData: setUser,\r\n  } = useAsync<User | null>();\r\n  const queryClient = useQueryClient();\r\n\r\n  // point free\r\n  const login = (form: AuthForm) => auth.login(form).then(setUser);\r\n  const register = (form: AuthForm) => auth.register(form).then(setUser);\r\n  const logout = () =>\r\n    auth.logout().then(() => {\r\n      setUser(null);\r\n      queryClient.clear();\r\n    });\r\n\r\n  useMount(\r\n    useCallback(() => {\r\n      run(bootstrapUser());\r\n    }, [])\r\n  );\r\n\r\n  if (isIdle || isLoading) {\r\n    return <FullPageLoading />;\r\n  }\r\n\r\n  if (isError) {\r\n    return <FullPageErrorFallback error={error} />;\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      children={children}\r\n      value={{ user, login, register, logout }}\r\n    />\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = React.useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth必须在AuthProvider中使用\");\r\n  }\r\n  return context;\r\n};\r\n"],"sourceRoot":""}